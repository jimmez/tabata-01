<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Tabata Timer</title>
  <style>
    :root{
      --bg:#000; --fg:#fff;
      --accent:#6ee7b7;
      --border:#23252b;
      --work1: rgba(34,197,94,.95);   /* green */
      --work2: rgba(34,197,94,.65);
      --rest1: rgba(239,68,68,.95);   /* red */
      --rest2: rgba(239,68,68,.65);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;background:var(--bg);color:var(--fg);
      font-family:Inter, ui-sans-serif, system-ui, Segoe UI, Roboto, Helvetica, Arial;
      -webkit-tap-highlight-color:transparent;
    }
    .progress-full{
      position:fixed; left:0; right:0; top:0; height:100vh;
      background:linear-gradient(to bottom, var(--work1), var(--work2));
      box-shadow:0 10px 30px rgba(34,197,94,.45);
      pointer-events:none; z-index:0;
      will-change:height, background;
      transition:background .12s ease, box-shadow .12s ease;
    }
    .app{position:relative; z-index:1; max-width:780px; margin:0 auto; min-height:100%;
      display:flex; flex-direction:column; gap:12px; padding:16px; padding-bottom:56px;}

    .topbar{display:flex; align-items:center; justify-content:space-between; gap:12px}
    .chip{display:inline-flex; align-items:center; gap:8px; padding:8px 12px;
      background:rgba(0,0,0,.35); border:1px solid var(--border); border-radius:999px; font-size:14px}
    .switch{position:relative; width:56px; height:32px; background:#333; border:1px solid var(--border); border-radius:999px; cursor:pointer}
    .switch input{display:none}
    .knob{position:absolute; top:2px; left:2px; width:28px; height:28px; border-radius:50%; background:#888; transition:all .18s ease}
    .switch input:checked + .knob{left:26px; background:var(--accent)}
    .btn{appearance:none; border:1px solid var(--border); background:rgba(0,0,0,.35); color:var(--fg);
      padding:12px 16px; border-radius:14px; font-weight:700; cursor:pointer}
    .btn:active{transform:translateY(1px)}

    .screen{display:none}
    .screen.active{display:block}

    .timer-card{position:relative; background:transparent; border:none; padding:24px}
    .phase{font-weight:900; text-align:center}
    .rep{font-size:120px; font-weight:900; line-height:1; margin:6px 0; text-align:center; opacity:.25}
    .clock{font-size:96px; font-weight:900; line-height:1; margin:6px 0; text-align:center}
    .sub{text-align:center; opacity:.85}
    .controls{display:flex; gap:10px; flex-wrap:wrap; justify-content:center; margin-top:10px}
    .pill{background:rgba(0,0,0,.35); border:1px solid var(--border); padding:10px 14px; border-radius:999px; color:var(--fg)}
    .cta{display:flex; gap:10px; justify-content:center; margin-top:14px; flex-wrap:wrap}
    .btn-xxl{font-size:22px; padding:16px 22px; border-radius:18px; min-width:120px}

    .settings{background:rgba(0,0,0,.35); border:1px solid var(--border); border-radius:16px; padding:16px}
    h2{margin:4px 0 12px; font-size:18px; text-transform:uppercase; letter-spacing:.08em}
    .block{background:rgba(0,0,0,.25); border:1px solid var(--border); border-radius:14px; padding:14px; margin-bottom:12px}
    .digit-grid{display:grid; grid-template-columns:repeat(4, 1fr); gap:8px; max-width:420px; margin:0 auto;}
    .digit-box{display:flex; flex-direction:column; align-items:center; gap:8px}
    .digit{width:58px; height:72px; border-radius:12px; border:1px solid var(--border);
      background:rgba(0,0,0,.35); display:grid; place-items:center;
      font-size:32px; font-weight:900; color:var(--fg); cursor:pointer}
    .ud{display:flex; gap:8px}
    .ud button{width:58px; padding:12px 0; border-radius:12px; background:rgba(0,0,0,.45);
      border:1px solid var(--border); color:var(--fg); font-weight:900; font-size:22px}
    .dlabel{font-size:12px; opacity:.8}

    .footer{
      position:fixed; bottom:0; left:0; right:0;
      text-align:center; font-size:12px; opacity:.6;
      padding:6px; background:rgba(0,0,0,.3); z-index:5;
    }
  </style>
</head>
<body>
  <div class="progress-full" id="progressFull"></div>

  <div class="app" id="app">
    <div class="topbar">
      <label class="chip"><span>Sound</span>
        <div class="switch"><input type="checkbox" id="soundToggle" checked /><div class="knob"></div></div>
      </label>
      <label class="chip"><span>Vol</span>
        <input id="volume" type="range" min="0" max="100" value="70" />
      </label>
      <button class="btn" id="openSettings">‚öôÔ∏è Settings</button>
    </div>

    <!-- TIMER -->
    <section id="timerScreen" class="screen active">
      <div class="timer-card">
        <div class="phase" id="phase">Work</div>
        <div class="rep" id="rep">1</div>
        <div class="clock" id="clock">00:20</div>
        <div class="sub">Start / Pause / Reset</div>
        <div class="controls">
          <span class="pill">Work: <b><span id="workMM">00</span>:<span id="workSS">20</span></b></span>
          <span class="pill">Rest: <b><span id="restMM">00</span>:<span id="restSS">10</span></b></span>
        </div>
        <div class="cta">
          <button id="startBtn" class="btn btn-xxl">‚ñ∂Ô∏è Start</button>
          <button id="pauseBtn" class="btn btn-xxl">‚è∏Ô∏è Pause</button>
          <button id="resetBtn" class="btn btn-xxl">‚èπ Reset</button>
        </div>
      </div>
    </section>

    <!-- SETTINGS -->
    <section id="settingsScreen" class="screen">
      <div class="settings">
        <h2>Work Time</h2>
        <div class="block" id="blockWork">
          <div class="digit-grid" data-kind="work">
            <div class="digit-box" data-role="mt"><div class="ud"><button data-act="inc">Ôºã</button></div><div class="digit">0</div><div class="ud"><button data-act="dec">Ôºç</button></div></div>
            <div class="digit-box" data-role="mo"><div class="ud"><button data-act="inc">Ôºã</button></div><div class="digit">0</div><div class="ud"><button data-act="dec">Ôºç</button></div></div>
            <div class="digit-box" data-role="st"><div class="ud"><button data-act="inc">Ôºã</button></div><div class="digit">2</div><div class="ud"><button data-act="dec">Ôºç</button></div></div>
            <div class="digit-box" data-role="so"><div class="ud"><button data-act="inc">Ôºã</button></div><div class="digit">0</div><div class="ud"><button data-act="dec">Ôºç</button></div></div>
          </div>
        </div>
        <h2>Rest Time</h2>
        <div class="block" id="blockRest">
          <div class="digit-grid" data-kind="rest">
            <div class="digit-box" data-role="mt"><div class="ud"><button data-act="inc">Ôºã</button></div><div class="digit">0</div><div class="ud"><button data-act="dec">Ôºç</button></div></div>
            <div class="digit-box" data-role="mo"><div class="ud"><button data-act="inc">Ôºã</button></div><div class="digit">0</div><div class="ud"><button data-act="dec">Ôºç</button></div></div>
            <div class="digit-box" data-role="st"><div class="ud"><button data-act="inc">Ôºã</button></div><div class="digit">1</div><div class="ud"><button data-act="dec">Ôºç</button></div></div>
            <div class="digit-box" data-role="so"><div class="ud"><button data-act="inc">Ôºã</button></div><div class="digit">0</div><div class="ud"><button data-act="dec">Ôºç</button></div></div>
          </div>
        </div>
        <div class="cta">
          <button class="btn btn-xxl" id="backToTimer">‚Ü©Ô∏è Back</button>
          <button class="btn btn-xxl" id="saveSettings">üíæ Save</button>
          <button class="btn btn-xxl" id="settingsReset">‚èπ Reset</button>
        </div>
      </div>
    </section>
  </div>

  <div class="footer">Jimmy James - 16.08.2025 - 10:55</div>

  <script>
    // --- simplified timer logic (same as before) ---
    const el = id => document.getElementById(id);
    const state = {work:20,rest:10,phase:'work',running:false,elapsed:0,rep:1};
    const progressFull = el('progressFull');
    const clockEl = el('clock'); const repEl = el('rep'); const phaseEl = el('phase');
    function secsToParts(s){s=Math.max(0,Math.round(s));return {m:Math.floor(s/60),s:s%60};}
    function pad(n){return String(n).padStart(2,'0');}
    function updateClockDisplay(){
      const total = state.phase==='work'?state.work:state.rest;
      const remain = Math.max(0,total-Math.floor(state.elapsed));
      const p=secsToParts(remain);
      clockEl.textContent=`${pad(p.m)}:${pad(p.s)}`;
      const frac=total>0?Math.min(state.elapsed/total,1):1;
      progressFull.style.height=((1-frac)*100)+'vh';
      if(state.phase==='work'){progressFull.style.background='linear-gradient(to bottom,var(--work1),var(--work2))';phaseEl.textContent='Work';}
      else {progressFull.style.background='linear-gradient(to bottom,var(--rest1),var(--rest2))';phaseEl.textContent='Rest';}
      repEl.textContent=state.rep;
    }
    function reset(){state.running=false;state.elapsed=0;state.phase='work';state.rep=1;updateClockDisplay();}
    let rafId; function loop(){if(!state.running)return;state.elapsed=(performance.now()-state.startTs)/1000;if(state.elapsed>= (state.phase==='work'?state.work:state.rest)){if(state.phase==='work'){state.phase='rest';}else{state.phase='work';state.rep++;}state.elapsed=0;state.startTs=performance.now();}updateClockDisplay();rafId=requestAnimationFrame(loop);}
    el('startBtn').onclick=()=>{if(!state.running){state.running=true;state.startTs=performance.now()-state.elapsed*1000;loop();}};
    el('pauseBtn').onclick=()=>{state.running=false;cancelAnimationFrame(rafId);};
    el('resetBtn').onclick=()=>reset();
    updateClockDisplay();
  </script>
</body>
</html>
